<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The main toolboxes &mdash; catalight 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/catalight_logo1_thick.svg"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Calibration File Details" href="calibration_file_details.html" />
    <link rel="prev" title="Alicat MFCs" href="equipment_guides.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            catalight
              <img src="_static/catalight_header_g_whitetext.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Welcome to Catalight!</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#installation-instructions">Installation instructions:</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="user_guide.html">How it works</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html#usage">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html#equipment-specific-guides">Equipment specific guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user_guide.html#data-analysis">Data analysis</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">The main toolboxes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#analysis-plotting">analysis.plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-user-inputs">analysis.user_inputs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#selecting-data">Selecting data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plotting-instructions">Plotting instructions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-tools">analysis.tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-gcdata-class">The GCData class</a></li>
<li class="toctree-l2"><a class="reference internal" href="#helper-scripts">Helper scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-calibration">Running a calibration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="calibration_file_details.html">Calibration File Details</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user_guide.html#auxiliary-tools">Auxiliary tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Providing feedback</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#developing-equipment-drivers">Developing equipment drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#creating-new-experiment-types">Creating new experiment types</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#making-changes-to-the-gui">Making changes to the GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#areas-for-future-development">Areas for future development</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html#writing-documentation">Writing documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Tests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">catalight</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="user_guide.html">How it works</a></li>
      <li class="breadcrumb-item active">The main toolboxes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/data_analysis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-main-toolboxes">
<h1>The main toolboxes<a class="headerlink" href="#the-main-toolboxes" title="Permalink to this heading"></a></h1>
<p class="linemarker linemarker-3">The <a class="reference internal" href="_autosummary/catalight.analysis.html#module-catalight.analysis" title="catalight.analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">catalight.analysis</span></code></a> sub-package contains a number of helpful tools to assist with data analysis. There are 4 types of modules found within the sub-package:</p>
<ul class="simple">
<li><p class="linemarker linemarker-5"><strong>Toolboxes —</strong>
Compiled functions grouped by function to help with common tasks</p></li>
<li><p class="linemarker linemarker-8"><strong>Data classes —</strong>
Modules containing classes to act on specific data types</p></li>
<li><p class="linemarker linemarker-11"><strong>Runnable scripts (prepended with “run_”) —</strong>
Can either be called from another script or run as a gui in command line or editor</p></li>
<li><p class="linemarker linemarker-14"><strong>GUIs (appended with “gui”) —</strong>
More complex scripts that should be run exclusively from command line or editor, not called.</p></li>
</ul>
<p class="linemarker linemarker-17">We will discuss the contents of each type of files within this section, and additional details can be found in the <a class="reference internal" href="api.html"><span class="doc">API</span></a> documentation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p class="linemarker linemarker-20">Inside the catalight GitHub repository you’ll find a folder called example_data containing a demo calibration file and two “samples” containing multiple experiment folders with data. You can use this data to test out the analysis functions within the analysis toolbox.</p>
</div>
<section id="analysis-plotting">
<h2>analysis.plotting<a class="headerlink" href="#analysis-plotting" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-24">The <a class="reference internal" href="_autosummary/catalight.analysis.plotting.html#module-catalight.analysis.plotting" title="catalight.analysis.plotting"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plotting</span></code></a> module groups functions used for plotting a variety of data types and formats. The <a class="reference internal" href="_autosummary/catalight.analysis.plotting.set_plot_style.html#catalight.analysis.plotting.set_plot_style" title="catalight.analysis.plotting.set_plot_style"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_plot_style()</span></code></a> function controls the appearance of all output functions, and adjust some plot visuals automatically based on the plot dimensions requested.</p>
<p class="linemarker linemarker-26">The most standard function in the module is <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_expt_summary.html#catalight.analysis.plotting.plot_expt_summary" title="catalight.analysis.plotting.plot_expt_summary"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_expt_summary()</span></code></a> which is usually the first plotting function called after running an experiment in conjunction with the <a class="reference internal" href="_autosummary/catalight.analysis.tools.run_analysis.html#catalight.analysis.tools.run_analysis" title="catalight.analysis.tools.run_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_analysis()</span></code></a> functions from the <a class="reference internal" href="_autosummary/catalight.analysis.tools.html#module-catalight.analysis.tools" title="catalight.analysis.tools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools</span></code></a> module. The <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_expt_summary.html#catalight.analysis.plotting.plot_expt_summary" title="catalight.analysis.plotting.plot_expt_summary"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_expt_summary()</span></code></a> functions calls 3 separate plotting functions, <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_run_num.html#catalight.analysis.plotting.plot_run_num" title="catalight.analysis.plotting.plot_run_num"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_run_num()</span></code></a>, <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_ppm.html#catalight.analysis.plotting.plot_ppm" title="catalight.analysis.plotting.plot_ppm"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_ppm()</span></code></a>, <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_X_and_S.html#catalight.analysis.plotting.plot_X_and_S" title="catalight.analysis.plotting.plot_X_and_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_X_and_S()</span></code></a> which we group together because they are often called back to back. Lets step through the output of each of these to better understand how normal analysis is done.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="_images/run_num_plot.svg"><img alt="_images/run_num_plot.svg" src="_images/run_num_plot.svg" width="800" /></a>
<figcaption>
<p><span class="caption-text"><a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_run_num.html#catalight.analysis.plotting.plot_run_num" title="catalight.analysis.plotting.plot_run_num"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_run_num()</span></code></a> produces the GC counts in ppm as a function of time based on the provided calibration file. This is the output of the reactor as seen by the GC.</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="_images/avg_conc_plot.svg"><img alt="_images/avg_conc_plot.svg" src="_images/avg_conc_plot.svg" width="800" /></a>
<figcaption>
<p><span class="caption-text"><a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_ppm.html#catalight.analysis.plotting.plot_ppm" title="catalight.analysis.plotting.plot_ppm"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_ppm()</span></code></a> plots the average concentration for each experimental step. In red, it also plots the mole balance based on the element the user provides to the function. The regular expressions (re) package is used to parse chemical names for the total number of atoms matching the requested mole balance element.</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-39">The X tick labels here contain units. This is done on purpose to notify the user that these values are strings! The values are kept as strings universally to handle the more complex output of composition sweeps.</p>
</div>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="_images/Conv_Sel_plot.svg"><img alt="_images/Conv_Sel_plot.svg" src="_images/Conv_Sel_plot.svg" width="800" /></a>
<figcaption>
<p><span class="caption-text">Finally, <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_X_and_S.html#catalight.analysis.plotting.plot_X_and_S" title="catalight.analysis.plotting.plot_X_and_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_X_and_S()</span></code></a> utilizes the <a class="reference internal" href="_autosummary/catalight.analysis.tools.calculate_X_and_S.html#catalight.analysis.tools.calculate_X_and_S" title="catalight.analysis.tools.calculate_X_and_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">calculate_X_and_S()</span></code></a> function to convert the average molecular concentrations from the previous graph into conversion and selectivity plots.</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p class="linemarker linemarker-46">If the <code class="docutils literal notranslate"><span class="pre">savedata</span></code> parameter of the <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_expt_summary.html#catalight.analysis.plotting.plot_expt_summary" title="catalight.analysis.plotting.plot_expt_summary"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_expt_summary()</span></code></a> function is entered as “True”, all three of these plots will be saved in the results subfolder of the experiment’s <a class="reference internal" href="user_guide.html#data-folder"><span class="std std-ref">data folder</span></a>.</p>
<p class="linemarker linemarker-48">The three plotting functions called by <a class="reference internal" href="_autosummary/catalight.analysis.plotting.plot_expt_summary.html#catalight.analysis.plotting.plot_expt_summary" title="catalight.analysis.plotting.plot_expt_summary"><code class="xref py py-func docutils literal notranslate"><span class="pre">plot_expt_summary()</span></code></a> can be called independently through scripting as well, and additional plotting tool are available within the <a class="reference internal" href="_autosummary/catalight.analysis.plotting.html#module-catalight.analysis.plotting" title="catalight.analysis.plotting"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plotting</span></code></a> module. <a class="reference internal" href="_autosummary/catalight.analysis.plotting.multiplot_X_and_S.html#catalight.analysis.plotting.multiplot_X_and_S" title="catalight.analysis.plotting.multiplot_X_and_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">multiplot_X_and_S()</span></code></a> and <a class="reference internal" href="_autosummary/catalight.analysis.plotting.multiplot_X_vs_S.html#catalight.analysis.plotting.multiplot_X_vs_S" title="catalight.analysis.plotting.multiplot_X_vs_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">multiplot_X_vs_S()</span></code></a> functions are used to plot comparisons between individual experiments and can be most easily accessed using the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DataExtractor.html#catalight.analysis.user_inputs.DataExtractor" title="catalight.analysis.user_inputs.DataExtractor"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataExtractor</span></code></a> dialog, covered in the <a class="reference internal" href="#ui"><span class="std std-ref">analysis.user_inputs</span></a> and <a class="reference internal" href="#helpers"><span class="std std-ref">Helper scripts</span></a> subsections.</p>
<figure class="align-default" id="id4">
<a class="reference internal image-reference" href="_images/avg_conc_plot.svg"><img alt="_images/avg_conc_plot.svg" src="_images/avg_conc_plot.svg" width="800" /></a>
<figcaption>
<p><span class="caption-text"><a class="reference internal" href="_autosummary/catalight.analysis.plotting.multiplot_X_and_S.html#catalight.analysis.plotting.multiplot_X_and_S" title="catalight.analysis.plotting.multiplot_X_and_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">multiplot_X_and_S()</span></code></a> produces two plots, showing conversion (selectivity) as a function of the independent variable. As such, only experiments of a single type can be compared using this function.</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id5">
<a class="reference internal image-reference" href="_images/avg_conc_plot.svg"><img alt="_images/avg_conc_plot.svg" src="_images/avg_conc_plot.svg" width="800" /></a>
<figcaption>
<p><span class="caption-text"><a class="reference internal" href="_autosummary/catalight.analysis.plotting.multiplot_X_vs_S.html#catalight.analysis.plotting.multiplot_X_vs_S" title="catalight.analysis.plotting.multiplot_X_vs_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">multiplot_X_vs_S()</span></code></a> produces a single plot, showing the selectivity as a function of conversion for the given experiments. This function can take in experiments with different independent variables, and is a good tool for comparing thermal and light driven reactions.</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p class="linemarker linemarker-60">Many users will want to customize plot style from the default styles printed by catalight. As such, whenever catalight takes a <code class="docutils literal notranslate"><span class="pre">savedata</span></code> parameter, figures are saved in a .pickle format. This allows the user to open the file as a <code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.pyplot.Figure</span></code> object and directly alter the plot elements. The <a class="reference internal" href="_autosummary/catalight.analysis.plotting.open_pickled_fig.html#catalight.analysis.plotting.open_pickled_fig" title="catalight.analysis.plotting.open_pickled_fig"><code class="xref py py-func docutils literal notranslate"><span class="pre">open_pickled_fig()</span></code></a> function accepts the full path to a pickled figure file, shows the image, and returns figure and axis handles to be used for visual editing. When the <a class="reference internal" href="_autosummary/catalight.analysis.plotting.set_plot_style.html#catalight.analysis.plotting.set_plot_style" title="catalight.analysis.plotting.set_plot_style"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_plot_style()</span></code></a> function is called, catalight also sets <code class="code docutils literal notranslate"><span class="pre">plt.rcParams['svg.fonttype']</span> <span class="pre">=</span> <span class="pre">'none'</span></code> which allows .svg file text to be edited in vector editing software such as Inkscape. Many components of .svg type files can be edited outside of python for visual changes that can be reasonably be performed on a file by file basis (whereas multi-file changes are better done programmatically).</p>
</section>
<section id="analysis-user-inputs">
<span id="ui"></span><h2>analysis.user_inputs<a class="headerlink" href="#analysis-user-inputs" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-66">Where the <a class="reference internal" href="_autosummary/catalight.analysis.plotting.html#module-catalight.analysis.plotting" title="catalight.analysis.plotting"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plotting</span></code></a> toolbox provides many experiment plotting options, the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.html#module-catalight.analysis.user_inputs" title="catalight.analysis.user_inputs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">user_inputs</span></code></a> toolbox provides tools for requesting plot options from the user. This toolbox is particularly helpful to super users that would like to develop simple GUIs to aid less experienced team members with data analysis tasks.</p>
<section id="selecting-data">
<h3>Selecting data<a class="headerlink" href="#selecting-data" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-70">The <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DirectorySelector.html#catalight.analysis.user_inputs.DirectorySelector" title="catalight.analysis.user_inputs.DirectorySelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">DirectorySelector</span></code></a> and <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DataExtractor.html#catalight.analysis.user_inputs.DataExtractor" title="catalight.analysis.user_inputs.DataExtractor"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataExtractor</span></code></a> classes were developed to aid with the selection of data to be plotted/analyzed. <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DirectorySelector.html#catalight.analysis.user_inputs.DirectorySelector" title="catalight.analysis.user_inputs.DirectorySelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">DirectorySelector</span></code></a> is the more simple of the two, and is just a wrapper over a normal <code class="xref py py-class docutils literal notranslate"><span class="pre">QFileDialog</span></code>. In this case the file dialog is changed from the native dialog to the QT version so that multi directory selection can be enabled. The advantage of this is the user can select multiple folder to analyze (the disadvantage is the dialog looks worse).</p>
<p class="linemarker linemarker-72">To use the user’s selection in other code, call the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DirectorySelector.html#catalight.analysis.user_inputs.DirectorySelector.get_output" title="catalight.analysis.user_inputs.DirectorySelector.get_output"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_output()</span></code></a> method. The following example demonstrates how to open the UI, allow the user to make a selection, and return the selection as a list called <code class="docutils literal notranslate"><span class="pre">&quot;expt_dirs&quot;</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prompt user to select multiple experiment directories</span>
<span class="n">data_dialog</span> <span class="o">=</span> <span class="n">DirectorySelector</span><span class="p">(</span><span class="n">starting_dir</span><span class="p">)</span>
<span class="k">if</span> <span class="n">data_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
  <span class="n">expt_dirs</span> <span class="o">=</span> <span class="n">data_dialog</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
</pre></div>
</div>
<p class="linemarker linemarker-81">The <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DataExtractor.html#catalight.analysis.user_inputs.DataExtractor" title="catalight.analysis.user_inputs.DataExtractor"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataExtractor</span></code></a> is a bit more complex than <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DirectorySelector.html#catalight.analysis.user_inputs.DirectorySelector" title="catalight.analysis.user_inputs.DirectorySelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">DirectorySelector</span></code></a> as it allows containing certain files and add custom labels to these directories for use in plotting.</p>
<p class="linemarker linemarker-83">The use of this class is very similar to <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DirectorySelector.html#catalight.analysis.user_inputs.DirectorySelector" title="catalight.analysis.user_inputs.DirectorySelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">DirectorySelector</span></code></a>. Notice that the output of the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DataExtractor.html#catalight.analysis.user_inputs.DataExtractor.get_output" title="catalight.analysis.user_inputs.DataExtractor.get_output"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_output()</span></code></a> methods is now a tuple returning both a list of files and matching data labels.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prompt user to select multiple experiment directories and label them</span>
<span class="n">data_dialog</span> <span class="o">=</span> <span class="n">DataExtractor</span><span class="p">(</span><span class="n">starting_dir</span><span class="p">)</span>
<span class="k">if</span> <span class="n">data_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">DataExtractor</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
  <span class="n">file_list</span><span class="p">,</span> <span class="n">data_labels</span> <span class="o">=</span> <span class="n">data_dialog</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id6">
<a class="reference internal image-reference" href="_images/dataextractor_expt_dir.png"><img alt="_images/dataextractor_expt_dir.png" src="_images/dataextractor_expt_dir.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">The output of the code above after selecting a folder containing avg_conc.csv files (the default search target)</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p class="linemarker linemarker-98">The get_user_inputs() function of both <a class="reference internal" href="_autosummary/catalight.analysis.run_change_xdata.html#module-catalight.analysis.run_change_xdata" title="catalight.analysis.run_change_xdata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_change_xdata</span></code></a> and <a class="reference internal" href="_autosummary/catalight.analysis.run_plot_comparison.html#module-catalight.analysis.run_plot_comparison" title="catalight.analysis.run_plot_comparison"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_plot_comparison</span></code></a> utilizes the exact code above. <a class="reference internal" href="_autosummary/catalight.analysis.run_plot_chromatograms_stacked.html#module-catalight.analysis.run_plot_chromatograms_stacked" title="catalight.analysis.run_plot_chromatograms_stacked"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_plot_chromatograms_stacked</span></code></a> on the other hand alters the init parameter when instantiating the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.DataExtractor.html#catalight.analysis.user_inputs.DataExtractor" title="catalight.analysis.user_inputs.DataExtractor"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataExtractor</span></code></a> class. The parameter ‘’ instructs the UI to search for any file and the ‘.asc’ enforces that the file must have a ‘.asc’ extension. Finally <code class="docutils literal notranslate"><span class="pre">data_depth=0</span></code> instructs the dialog to return file paths from its get_output() method rather than directories. This format is used to allow the user to select individual chromatograph data files for plotting.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prompt user to select .asc files and label them</span>
<span class="n">data_dialog</span> <span class="o">=</span> <span class="n">DataExtractor</span><span class="p">(</span><span class="n">starting_dir</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;.asc&#39;</span><span class="p">,</span> <span class="n">data_depth</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="k">if</span> <span class="n">data_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">DataExtractor</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
  <span class="n">file_list</span><span class="p">,</span> <span class="n">data_labels</span> <span class="o">=</span> <span class="n">data_dialog</span><span class="o">.</span><span class="n">get_output</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id7">
<a class="reference internal image-reference" href="_images/dataextractor_files.png"><img alt="_images/dataextractor_files.png" src="_images/dataextractor_files.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">The output of the code above after selecting a folder that contains files endings in ‘.asc’ (the requested search target). Notice the bottom most items now end in ‘.ASC’</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="plotting-instructions">
<h3>Plotting instructions<a class="headerlink" href="#plotting-instructions" title="Permalink to this heading"></a></h3>
<p class="linemarker linemarker-114">Using a combinations of regular file dialogs and the custom dialogs presented in the previous section, the user is now able to select many different data types in a UI. This section describes tool built to help when the user needs to enter more information than just which data they would like to plot. Many of the functions called in the various <a class="reference internal" href="#helpers"><span class="std std-ref">helper tools</span></a> take a number of arguments. Many of these arguments repeat across different functions. The <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionsDialog.html#catalight.analysis.user_inputs.PlotOptionsDialog" title="catalight.analysis.user_inputs.PlotOptionsDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotOptionsDialog</span></code></a> was developed to reuse as much code as possible while customizing a UI specifically for the options required in particular functions. The <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionsDialog.html#catalight.analysis.user_inputs.PlotOptionsDialog" title="catalight.analysis.user_inputs.PlotOptionsDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotOptionsDialog</span></code></a> mixes and matches its GUI elements programmatically based on the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionList.html#catalight.analysis.user_inputs.PlotOptionList" title="catalight.analysis.user_inputs.PlotOptionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotOptionList</span></code></a> provided to it on instantiation. The <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionList.html#catalight.analysis.user_inputs.PlotOptionList" title="catalight.analysis.user_inputs.PlotOptionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotOptionList</span></code></a> is a data class containing all of the default plot options each wrapped up in another data class called <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.Option.html#catalight.analysis.user_inputs.Option" title="catalight.analysis.user_inputs.Option"><code class="xref py py-class docutils literal notranslate"><span class="pre">Option</span></code></a>.</p>
<p class="linemarker linemarker-116"><a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.Option.html#catalight.analysis.user_inputs.Option" title="catalight.analysis.user_inputs.Option"><code class="xref py py-class docutils literal notranslate"><span class="pre">Option</span></code></a> contains the following format:</p>
<ul class="simple">
<li><p class="linemarker linemarker-118"><strong>value:</strong> Holds the user supplied value</p></li>
<li><p class="linemarker linemarker-119"><strong>include:</strong> Indicates whether or not to include GUI element</p></li>
<li><p class="linemarker linemarker-120"><strong>label:</strong> Text displayed in gui to represent what the value is</p></li>
<li><p class="linemarker linemarker-121"><strong>tooltip:</strong> Text for widget tooltip</p></li>
<li><p class="linemarker linemarker-122"><strong>widget:</strong> Widget used for entering option values</p></li>
</ul>
<p class="linemarker linemarker-124">While <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionList.html#catalight.analysis.user_inputs.PlotOptionList" title="catalight.analysis.user_inputs.PlotOptionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotOptionList</span></code></a> contains the following <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.Option.html#catalight.analysis.user_inputs.Option" title="catalight.analysis.user_inputs.Option"><code class="xref py py-class docutils literal notranslate"><span class="pre">Options</span></code></a></p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p class="linemarker linemarker-127">reactant</p></td>
<td><p class="linemarker linemarker-127">target_molecule</p></td>
<td><p class="linemarker linemarker-127">mole_bal</p></td>
</tr>
<tr class="row-even"><td><p class="linemarker linemarker-129">figsize</p></td>
<td><p class="linemarker linemarker-129">switch_to_hours</p></td>
<td><p class="linemarker linemarker-129">savedata</p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-131">overwrite</p></td>
<td><p class="linemarker linemarker-131">basecorrect</p></td>
<td><p class="linemarker linemarker-131">units</p></td>
</tr>
<tr class="row-even"><td><p class="linemarker linemarker-133">plotXvsS</p></td>
<td><p class="linemarker linemarker-133">forcezero</p></td>
<td><p class="linemarker linemarker-133">xdata</p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-135">plot_XandS</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p class="linemarker linemarker-138">No changes need to be made to any default <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.Option.html#catalight.analysis.user_inputs.Option" title="catalight.analysis.user_inputs.Option"><code class="xref py py-class docutils literal notranslate"><span class="pre">Option</span></code></a> within the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionList.html#catalight.analysis.user_inputs.PlotOptionList" title="catalight.analysis.user_inputs.PlotOptionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotOptionList</span></code></a> before generating the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionsDialog.html#catalight.analysis.user_inputs.PlotOptionsDialog" title="catalight.analysis.user_inputs.PlotOptionsDialog"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlotOptionsDialog</span></code></a>, but the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionList.html#catalight.analysis.user_inputs.PlotOptionList.change_includes" title="catalight.analysis.user_inputs.PlotOptionList.change_includes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">change_includes()</span></code></a> method can be used to turn on and off specific option GUI components before instantiating the dialog. All options are turned off by default.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Edit Options specifically for initial analysis dialog</span>
<span class="n">include_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;overwrite&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;basecorrect&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;reactant&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;target_molecule&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;mole_bal&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;figsize&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s1">&#39;savedata&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;switch_to_hours&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
<span class="n">options</span> <span class="o">=</span> <span class="n">PlotOptionList</span><span class="p">()</span>  <span class="c1"># Create default gui options list</span>
<span class="n">options</span><span class="o">.</span><span class="n">change_includes</span><span class="p">(</span><span class="n">include_dict</span><span class="p">)</span>  <span class="c1"># Modify gui components</span>
<span class="n">options_dialog</span> <span class="o">=</span> <span class="n">PlotOptionsDialog</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>  <span class="c1"># Build dialog w/ options</span>
<span class="k">if</span> <span class="n">options_dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">PlotOptionsDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
    <span class="n">response_dict</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">values_todict</span><span class="p">()</span>
</pre></div>
</div>
<figure class="align-default" id="id8">
<img alt="_images/plotting_instructions.png" src="_images/plotting_instructions.png" />
<figcaption>
<p><span class="caption-text">Example pop-up dialog produced by any of the ‘run_’.py modules when using the user_inputs() functions. This specifically is the options dialog from <a class="reference internal" href="_autosummary/catalight.analysis.run_initial_analysis.html#module-catalight.analysis.run_initial_analysis" title="catalight.analysis.run_initial_analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_initial_analysis</span></code></a> and is the result of the example code above.</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p class="linemarker linemarker-156">Calling the <a class="reference internal" href="_autosummary/catalight.analysis.user_inputs.PlotOptionList.html#catalight.analysis.user_inputs.PlotOptionList.values_todict" title="catalight.analysis.user_inputs.PlotOptionList.values_todict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">values_todict()</span></code></a> method returns a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> of the users entries and <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> which can be directly unpacked using the <code class="docutils literal notranslate"><span class="pre">**</span></code> symbol</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">The code that is run when running the <a class="reference internal" href="_autosummary/catalight.analysis.run_initial_analysis.html#module-catalight.analysis.run_initial_analysis" title="catalight.analysis.run_initial_analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_initial_analysis</span></code></a> file as a script.</span><a class="headerlink" href="#id9" title="Permalink to this code"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expt_dirs</span><span class="p">,</span> <span class="n">calDF</span><span class="p">,</span> <span class="n">response_dict</span> <span class="o">=</span> <span class="n">get_user_inputs</span><span class="p">()</span>
<span class="n">main</span><span class="p">(</span><span class="n">expt_dirs</span><span class="p">,</span> <span class="n">calDF</span><span class="p">,</span> <span class="o">**</span><span class="n">response_dict</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="analysis-tools">
<h2>analysis.tools<a class="headerlink" href="#analysis-tools" title="Permalink to this heading"></a></h2>
<p class="linemarker linemarker-166">Finally, the <a class="reference internal" href="_autosummary/catalight.analysis.tools.html#module-catalight.analysis.tools" title="catalight.analysis.tools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools</span></code></a> toolbox contains many helper functions that get reused repeatedly throughout the code base. If you are planning to develop new components of catalight, it is particularly advantageous for you to study these functions and utilize them where ever possible. More information about each function can be obtained from the <a class="reference external" href="https://pandas.pydata.org/docs/reference/index.html#api" title="(in pandas v1.5.3)"><span>API reference</span></a> section. Here we will only highlight the most important functions for the average user.</p>
<p class="linemarker linemarker-168">Namely, we will skip over:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p class="linemarker linemarker-171"><a class="reference internal" href="_autosummary/catalight.analysis.tools.build_results_dict.html#catalight.analysis.tools.build_results_dict" title="catalight.analysis.tools.build_results_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">build_results_dict()</span></code></a></p></td>
<td><p class="linemarker linemarker-171"><a class="reference internal" href="_autosummary/catalight.analysis.tools.get_bool.html#catalight.analysis.tools.get_bool" title="catalight.analysis.tools.get_bool"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_bool()</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p class="linemarker linemarker-173"><a class="reference internal" href="_autosummary/catalight.analysis.tools.list_matching_files.html#catalight.analysis.tools.list_matching_files" title="catalight.analysis.tools.list_matching_files"><code class="xref py py-func docutils literal notranslate"><span class="pre">list_matching_files()</span></code></a></p></td>
<td><p class="linemarker linemarker-173"><a class="reference internal" href="_autosummary/catalight.analysis.tools.get_run_number.html#catalight.analysis.tools.get_run_number" title="catalight.analysis.tools.get_run_number"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_run_number()</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-175"><a class="reference internal" href="_autosummary/catalight.analysis.tools.list_expt_obj.html#catalight.analysis.tools.list_expt_obj" title="catalight.analysis.tools.list_expt_obj"><code class="xref py py-func docutils literal notranslate"><span class="pre">list_expt_obj()</span></code></a></p></td>
<td><p class="linemarker linemarker-175"><a class="reference internal" href="_autosummary/catalight.analysis.tools.get_timepassed.html#catalight.analysis.tools.get_timepassed" title="catalight.analysis.tools.get_timepassed"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_timepassed()</span></code></a></p></td>
</tr>
</tbody>
</table>
<p class="linemarker linemarker-178"><a class="reference internal" href="_autosummary/catalight.analysis.tools.run_analysis.html#catalight.analysis.tools.run_analysis" title="catalight.analysis.tools.run_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_analysis()</span></code></a> is the main workhorse of the <a class="reference internal" href="_autosummary/catalight.analysis.html#module-catalight.analysis" title="catalight.analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">analysis</span></code></a> subpackage. This function takes in an <a class="reference internal" href="_autosummary/catalight.equipment.experiment_control.Experiment.html#catalight.equipment.experiment_control.Experiment" title="catalight.equipment.experiment_control.Experiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Experiment</span> <span class="pre">object</span></code></a> and a <a class="reference internal" href="#calibration"><span class="std std-ref">calibration file</span></a> (imported as a <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.5.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>) and produces a 3D numpy <code class="xref py py-class docutils literal notranslate"><span class="pre">array</span></code> of concentrations, and two 2D <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.5.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas</span> <span class="pre">DataFrames</span></code></a> (avg_conc and std_conc). If <code class="docutils literal notranslate"><span class="pre">savedata</span></code> is entered as <code class="docutils literal notranslate"><span class="pre">True</span></code>, the three outputs are saved in the experiment results folder (<a class="reference internal" href="user_guide.html#data-folder"><span class="std std-ref">See data structure diagram</span></a>)</p>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="_images/concentrations_format.png"><img alt="_images/concentrations_format.png" src="_images/concentrations_format.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">The concentrations variable returned by the <a class="reference internal" href="_autosummary/catalight.analysis.tools.run_analysis.html#catalight.analysis.tools.run_analysis" title="catalight.analysis.tools.run_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_analysis()</span></code></a> function is a 3D <code class="xref py py-class docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code> containing the timestamps and ppm values for every data point collected during an experiment.</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id11">
<a class="reference internal image-reference" href="_images/avg_std_dataframes.png"><img alt="_images/avg_std_dataframes.png" src="_images/avg_std_dataframes.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">The avg and std variables by the <a class="reference internal" href="_autosummary/catalight.analysis.tools.run_analysis.html#catalight.analysis.tools.run_analysis" title="catalight.analysis.tools.run_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_analysis()</span></code></a> function are both 2D <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.5.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas</span> <span class="pre">DataFrames</span></code></a> showing the average and standard deviation in ppm concentration for a given experimental condition. The time stamps are dropped from these two DataFrames, but time passed is given as the index for stability_test <a class="reference internal" href="_autosummary/catalight.equipment.experiment_control.Experiment.html#catalight.equipment.experiment_control.Experiment" title="catalight.equipment.experiment_control.Experiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Experiments</span></code></a>.</span><a class="headerlink" href="#id11" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p class="linemarker linemarker-190">Once calculated, concentrations, avg, and std can always reintroduced into the code using the <a class="reference internal" href="_autosummary/catalight.analysis.tools.load_results.html#catalight.analysis.tools.load_results" title="catalight.analysis.tools.load_results"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_results()</span></code></a> function. Generally, when the <code class="docutils literal notranslate"><span class="pre">overwrite</span></code> <code class="docutils literal notranslate"><span class="pre">kwarg</span></code> is accepted, this parameter switches between whether <a class="reference internal" href="_autosummary/catalight.analysis.tools.run_analysis.html#catalight.analysis.tools.run_analysis" title="catalight.analysis.tools.run_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_analysis()</span></code></a> or <a class="reference internal" href="_autosummary/catalight.analysis.tools.load_results.html#catalight.analysis.tools.load_results" title="catalight.analysis.tools.load_results"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_results()</span></code></a> is called (for existing datasets). Many experiments analyzed programmatically using the <a class="reference internal" href="_autosummary/catalight.analysis.run_initial_analysis.html#module-catalight.analysis.run_initial_analysis" title="catalight.analysis.run_initial_analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">catalight.analysis.run_initial_analysis</span></code></a> module. For all analysis types, <a class="reference internal" href="_autosummary/catalight.analysis.tools.convert_index.html#catalight.analysis.tools.convert_index" title="catalight.analysis.tools.convert_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">convert_index()</span></code></a> can be a useful tool. For composition sweeps in particular, it is hard to define an exact X unit the user is looking for in a general and simplistic way. As such, catalight always outputs the x axis of composition sweeps as a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">string</span></code></a> depicting each individual component. The <a class="reference internal" href="_autosummary/catalight.analysis.tools.convert_index.html#catalight.analysis.tools.convert_index" title="catalight.analysis.tools.convert_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">convert_index()</span></code></a> functions and related <a class="reference internal" href="_autosummary/catalight.analysis.run_change_xdata.html#module-catalight.analysis.run_change_xdata" title="catalight.analysis.run_change_xdata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_change_xdata</span></code></a> module allow the user to change the x data from strings to floats with the users desired units. This is how composition sweeps can be generalized between, for example, varying the ratio between two reactants or varying the total reactant pressure.</p>
<p class="linemarker linemarker-192">To run analysis in the first place, a calibration must be supplied to properly convert GC counts to ppm concentrations. The <a class="reference internal" href="_autosummary/catalight.analysis.tools.analyze_cal_data.html#catalight.analysis.tools.analyze_cal_data" title="catalight.analysis.tools.analyze_cal_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">analyze_cal_data()</span></code></a> function takes in a basic .csv file describing chemical elution times and calibration data to generate a compatible calibration file. <a class="reference internal" href="#calibration"><span class="std std-ref">See the calibration section for more details</span></a></p>
<p class="linemarker linemarker-194">Ultimately most experiments will seek to convert some molecular concentration measurements into catalytic measurements. Thus far catalight is able to calculate conversion (X) and chemical selectivity (S). This is done by passing an <a class="reference internal" href="_autosummary/catalight.equipment.experiment_control.Experiment.html#catalight.equipment.experiment_control.Experiment" title="catalight.equipment.experiment_control.Experiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Experiment</span> <span class="pre">object</span></code></a> and Chem ID indicating a reactant and chemical target to the  <a class="reference internal" href="_autosummary/catalight.analysis.tools.calculate_X_and_S.html#catalight.analysis.tools.calculate_X_and_S" title="catalight.analysis.tools.calculate_X_and_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">calculate_X_and_S()</span></code></a> function. Conversion, selectivity, and their respective errors are then calculated according to the following equations:</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}&amp;X = 1 - \frac{C_{reactant}}{C_{total}}\\&amp;S = \frac{C_{target}}{C_{total}*X}\\&amp;\sigma_{C_{tot}} = \sqrt{\sigma_{Molecule A}^{2} + ...
                            + \sigma_{Molecule N}^{2}}\\&amp;\sigma_{X} = \sqrt{(\frac{\sigma_{C_{reactant}}} {C_{total}})^{2}
                      + (\frac{\sigma_{C_{total}}*C_{reactant}}
                                {C_{total}^{2}})^{2}}\\&amp;\sigma_{S} = \sqrt{(\frac{\sigma_{C_{target}}} {C_{total}*X})^{2}
                      + (\frac{\sigma_{C_{total}}*C_{target}}
                                {C_{total}^{2}*X})^{2}
                      + (\frac{\sigma_{X}*C_{target}}
                                {C_{total}*X^{2}})^{2}}\end{aligned}\end{align} \]</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-216">Before running the <a class="reference internal" href="_autosummary/catalight.analysis.tools.calculate_X_and_S.html#catalight.analysis.tools.calculate_X_and_S" title="catalight.analysis.tools.calculate_X_and_S"><code class="xref py py-func docutils literal notranslate"><span class="pre">calculate_X_and_S()</span></code></a> function, <a class="reference internal" href="_autosummary/catalight.analysis.tools.run_analysis.html#catalight.analysis.tools.run_analysis" title="catalight.analysis.tools.run_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_analysis()</span></code></a> should be called on the desired experiment to generate the concentrations, avg, and std results files. These are imported to the final calculations.</p>
</div>
</section>
</section>
<section id="the-gcdata-class">
<h1>The GCData class<a class="headerlink" href="#the-gcdata-class" title="Permalink to this heading"></a></h1>
<p class="linemarker linemarker-220">A central idea underpinning the <a class="reference internal" href="_autosummary/catalight.analysis.html#module-catalight.analysis" title="catalight.analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">analysis</span></code></a> module is the <a class="reference internal" href="_autosummary/catalight.analysis.gcdata.GCData.html#catalight.analysis.gcdata.GCData" title="catalight.analysis.gcdata.GCData"><code class="xref py py-class docutils literal notranslate"><span class="pre">GCData</span></code></a> class. All imported .asc files from the GC output are loaded as an instance of the <a class="reference internal" href="_autosummary/catalight.analysis.gcdata.GCData.html#catalight.analysis.gcdata.GCData" title="catalight.analysis.gcdata.GCData"><code class="xref py py-class docutils literal notranslate"><span class="pre">GCData</span></code></a> class and relevant data actions (such as plot integration and conversion to ppm concentrations) are carried out by class methods. The goal of the project is to eventually create ubiquitous analysis tools that can interact with a number of different data types. For example, we currently have the GCData class but may one day introduce an FTIRData class. The goal would be to apply this concept wherever possible and built tools such as those found in the other sections of this guide to work as seamlessly with other data types as is reasonable.</p>
<p class="linemarker linemarker-222">For the time being, the only data type supported by catalight is GCData, whose main behavior includes, extracting data from .asc files, finding peaks, integrating peaks, and converting those peaks to concentrations given some calibration data. All actions logically taken on a single data file are performed within this class. All actions which combine data from multiple files are performed else where (ex. <a class="reference internal" href="_autosummary/catalight.analysis.tools.run_analysis.html#catalight.analysis.tools.run_analysis" title="catalight.analysis.tools.run_analysis"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_analysis()</span></code></a>).</p>
<p class="linemarker linemarker-224">Usage of GCData is straight forward on the frontend. An instance of GCData is created by passing a path to an .asc file output by the GC and indicating if base correction is wanted. Some processing is run in the background, making data available as instance attributes of the new <code class="docutils literal notranslate"><span class="pre">data</span></code> object. Converting to concentrations is done by simply calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_concentrations()</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">GCData</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">basecorrect</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get_concentrations</span><span class="p">(</span><span class="n">calDF</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils align-default" id="id12">
<caption><span class="caption-text">Methods called on instantiating the new object</span><a class="headerlink" href="#id12" title="Permalink to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p class="linemarker linemarker-234">1</p></td>
<td><p class="linemarker linemarker-235"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getrawdata()</span></code></p></td>
<td><p class="linemarker linemarker-236">Pull data from .asc file. Returns timestamps and a DataFrame with signal vs elution time.</p></td>
</tr>
<tr class="row-even"><td><p class="linemarker linemarker-237">2</p></td>
<td><p class="linemarker linemarker-238"><code class="xref py py-meth docutils literal notranslate"><span class="pre">apex_inds()</span></code></p></td>
<td><p class="linemarker linemarker-239">Find peaks.</p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-240">3</p></td>
<td><p class="linemarker linemarker-241"><code class="xref py py-meth docutils literal notranslate"><span class="pre">integration_inds()</span></code></p></td>
<td><p class="linemarker linemarker-242">Find integration bounds of peaks.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id13">
<caption><span class="caption-text">Methods called when running the <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_concentrations()</span></code> method</span><a class="headerlink" href="#id13" title="Permalink to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p class="linemarker linemarker-247">1</p></td>
<td><p class="linemarker linemarker-248"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_concentrations()</span></code></p></td>
<td><p class="linemarker linemarker-249">Main method called</p></td>
</tr>
<tr class="row-even"><td><p class="linemarker linemarker-250">2</p></td>
<td><p class="linemarker linemarker-251"><code class="xref py py-meth docutils literal notranslate"><span class="pre">integrate_peak()</span></code></p></td>
<td><p class="linemarker linemarker-252">Integrate the peaks based on the computed integration bounds.</p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-253">3</p></td>
<td><p class="linemarker linemarker-254"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convert_to_ppm()</span></code></p></td>
<td><p class="linemarker linemarker-255">Converts integrated peak counts to ppm based on calibration data for each molecule.</p></td>
</tr>
</tbody>
</table>
<p class="linemarker linemarker-257">Lastly, <code class="xref py py-class docutils literal notranslate"><span class="pre">GC_Data</span></code> <code class="xref py py-meth docutils literal notranslate"><span class="pre">plot_integration()</span></code> is helpful for evaluating/troubleshooting the integration performance. This method plots the integration bounds and peak apex. To give a better few of how the data is being processed.</p>
</section>
<section id="helper-scripts">
<span id="helpers"></span><h1>Helper scripts<a class="headerlink" href="#helper-scripts" title="Permalink to this heading"></a></h1>
<p class="linemarker linemarker-263">A number of executable scripts have been written to perform basic data analysis with graphical user inputs. Files prefixed with the phrase “run_” indicate that the file can be executed in command line and UI prompts will help the user run the respective analysis instructions. Alternatively, all of these files can be called in separate, user-created scripts without executing the file entirely. Each “run” file in the analysis subpackage contains two function: “get_user_inputs()” and “main()”. “get_user_inputs()” is designed to open UI dialogs, taking in user values for running analysis. This was done to make data processing as simple as possible for users without coding experience. “main()” is where the actual analysis gets performed. The main() functions typically have a large number of arguments, which may seem intimidating at first. This is mainly to increase flexibility, and many of these arguments can stay as their default values. If a user would like to run analysis in a scripted fashion, calling analysis.run/_”filename”.main() with the desired arguments is a completely acceptable method! Of course, the user can bypass these helper functions all together for even more flexible data analysis options.</p>
<table class="docutils align-default" id="id14">
<caption><span class="caption-text">Helper functions in the <a class="reference internal" href="_autosummary/catalight.analysis.html#module-catalight.analysis" title="catalight.analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">analysis</span></code></a> package</span><a class="headerlink" href="#id14" title="Permalink to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p class="linemarker linemarker-268"><a class="reference internal" href="_autosummary/catalight.analysis.run_calibration.html#module-catalight.analysis.run_calibration" title="catalight.analysis.run_calibration"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_calibration</span></code></a></p></td>
<td><p class="linemarker linemarker-269">Provide prompts to user and call functions to run calibration analysis</p></td>
</tr>
<tr class="row-even"><td><p class="linemarker linemarker-270"><a class="reference internal" href="_autosummary/catalight.analysis.run_change_xdata.html#module-catalight.analysis.run_change_xdata" title="catalight.analysis.run_change_xdata"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_change_xdata</span></code></a></p></td>
<td><p class="linemarker linemarker-271">Swap the x axis values and units with a user entered array</p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-272"><a class="reference internal" href="_autosummary/catalight.analysis.run_initial_analysis.html#module-catalight.analysis.run_initial_analysis" title="catalight.analysis.run_initial_analysis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_initial_analysis</span></code></a></p></td>
<td><p class="linemarker linemarker-273">Run initial analysis on all experiments within the main folder provided by the user</p></td>
</tr>
<tr class="row-even"><td><p class="linemarker linemarker-274"><a class="reference internal" href="_autosummary/catalight.analysis.run_plot_chromatograms_stacked.html#module-catalight.analysis.run_plot_chromatograms_stacked" title="catalight.analysis.run_plot_chromatograms_stacked"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_plot_chromatograms_stacked</span></code></a></p></td>
<td><p class="linemarker linemarker-275">Plot any number of chromatogram files (‘.asc’) on a single set of axes</p></td>
</tr>
<tr class="row-odd"><td><p class="linemarker linemarker-276"><a class="reference internal" href="_autosummary/catalight.analysis.run_plot_comparison.html#module-catalight.analysis.run_plot_comparison" title="catalight.analysis.run_plot_comparison"><code class="xref py py-mod docutils literal notranslate"><span class="pre">run_plot_comparison</span></code></a></p></td>
<td><p class="linemarker linemarker-277">Provide prompts to the user to plot multiple experiments either on a single plot with conversion and selectivity as axes or on two plots with conversion or selectivity plotted as a function of a shared independent variable (temperature, power, etc.)</p></td>
</tr>
</tbody>
</table>
<p class="linemarker linemarker-279">Finally, the <a class="reference internal" href="_autosummary/catalight.analysis.chromatogram_scanner_gui.html#module-catalight.analysis.chromatogram_scanner_gui" title="catalight.analysis.chromatogram_scanner_gui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">chromatogram_scanner_gui</span></code></a> module provides a fully comprehensive GUI to scanning through collected GC data. The behavior of this feature is a bit more complicated than the UI described above, so it is intended to only be used in a GUI style. After selecting a main directory in a basic file dialog, the screen below will appear to the user showing all .asc files contained within. The user is also able to toggle between FID and TCD files (more options can be added) and an experimental feature for supplying custom file extensions is included, but not fully supported at the moment.</p>
<figure class="align-default" id="id15">
<a class="reference internal image-reference" href="_images/chromatogram_scanner_gui_screenshot.png"><img alt="_images/chromatogram_scanner_gui_screenshot.png" src="_images/chromatogram_scanner_gui_screenshot.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">The <a class="reference internal" href="_autosummary/catalight.analysis.chromatogram_scanner_gui.html#module-catalight.analysis.chromatogram_scanner_gui" title="catalight.analysis.chromatogram_scanner_gui"><code class="xref py py-mod docutils literal notranslate"><span class="pre">chromatogram_scanner_gui</span></code></a> allows the user to display chromatograms within a selected folder with or without baseline correction included.</span><a class="headerlink" href="#id15" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="linemarker linemarker-287">The plot integration bounds feature is in development and will be included in a later release within the near future.</p>
</div>
</section>
<section id="running-a-calibration">
<span id="calibration"></span><h1>Running a calibration<a class="headerlink" href="#running-a-calibration" title="Permalink to this heading"></a></h1>
<p class="linemarker linemarker-293">Within catalight, calibrations are handled using external csv files. These are imported as a <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.5.3)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>, usually referred to in the code as “calDF”. We primarily handle calibrations and integration outside of peaksimple to offer more control over the process and automation of analysis. For users that would prefer to utilize peaksimple for calibration, the results files output from peaksimple are saved in the same location as the ascii files.</p>
<p class="linemarker linemarker-295">Calibrations can be performed by flowing in a calibration standard gas mixture through one of the systems mass flow controllers. The user can perform a composition sweep using either the GUI or scripting and then utilize <a class="reference internal" href="_autosummary/catalight.analysis.tools.analyze_cal_data.html#catalight.analysis.tools.analyze_cal_data" title="catalight.analysis.tools.analyze_cal_data"><code class="xref py py-func docutils literal notranslate"><span class="pre">catalight.analysis.tools.analyze_cal_data()</span></code></a> to analyze the collected data. The <a class="reference internal" href="_autosummary/catalight.analysis.run_calibration.html#module-catalight.analysis.run_calibration" title="catalight.analysis.run_calibration"><code class="xref py py-mod docutils literal notranslate"><span class="pre">catalight.analysis.run_calibration</span></code></a> module includes a GUI interface to help with this process. The Experiment class also contains a calibration experiment type, as seen in it’s <a class="reference internal" href="_autosummary/catalight.equipment.experiment_control.Experiment.html#catalight.equipment.experiment_control.Experiment.expt_type" title="catalight.equipment.experiment_control.Experiment.expt_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">expt_type</span></code></a> attribute. This is essentially the same as a composition sweep, but uses different naming conventions, warns GUI users to select a calibration file, and may be outfitted with additional function in later versions. The <a class="reference internal" href="_autosummary/catalight.equipment.alicat_MFC.gas_control.Gas_System.html#catalight.equipment.alicat_MFC.gas_control.Gas_System" title="catalight.equipment.alicat_MFC.gas_control.Gas_System"><code class="xref py py-class docutils literal notranslate"><span class="pre">Gas_System</span></code></a> class provides a <a class="reference internal" href="_autosummary/catalight.equipment.alicat_MFC.gas_control.Gas_System.html#catalight.equipment.alicat_MFC.gas_control.Gas_System.set_calibration_gas" title="catalight.equipment.alicat_MFC.gas_control.Gas_System.set_calibration_gas"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_calibration_gas()</span></code></a> method to build a new custom mixture to control MFC flow with high precision. This method is utilized in the GUI, but needs to be called separately if scripting.</p>
<p class="linemarker linemarker-297">In addition to performing the physical calibration experiment, the user needs to provide a calibration file describing the input gas. More information about the calibration file can be found in the <a class="reference internal" href="calibration_file_details.html"><span class="doc">Calibration File Details</span></a> section.</p>
<figure class="align-default" id="id16">
<a class="reference internal image-reference" href="_images/running_calibration.png"><img alt="_images/running_calibration.png" src="_images/running_calibration.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">An example of running the “analyze_cal_data” method in a scripted format. An empty calibration file containing chemical ID strings and GC elution times windows needs to be provided and a calibration experiment should already be run.</span><a class="headerlink" href="#id16" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id17">
<a class="reference internal image-reference" href="_images/calibration_output_runnum.png"><img alt="_images/calibration_output_runnum.png" src="_images/calibration_output_runnum.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">An example of the output of running calibration analysis on a data set.</span><a class="headerlink" href="#id17" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<figure class="align-default" id="id18">
<a class="reference internal image-reference" href="_images/calibration_output_fits.png"><img alt="_images/calibration_output_fits.png" src="_images/calibration_output_fits.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-text">An example of fitting to the calibration gas data set provided. Linear fit values are saved into the output calibration.csv file and can be loaded into the rest of the package wherever CalDF is used. Notice that C<sub>2</sub>H<sub>2</sub>produces a bad fit output. This is because there is no C<sub>2</sub>H<sub>2</sub>in the physical calibration gas, but it was entered into the calgas file.</span><a class="headerlink" href="#id18" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="calibration_file_details.html">Calibration File Details</a></li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="equipment_guides.html" class="btn btn-neutral float-left" title="Alicat MFCs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="calibration_file_details.html" class="btn btn-neutral float-right" title="Calibration File Details" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Briley Bourgeois, Claire Carlin.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>